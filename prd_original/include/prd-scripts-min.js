var PAUTOCOMPLETE={};PAUTOCOMPLETE.arrayToAutocompleteUL=function(c){var a,b="";if(c&&c.length>0){b="<ul>\n";for(a=c.length;a--;){b+="  <li>"+c[a]+"</li>\n"}b+="</ul>"}return b};PAUTOCOMPLETE.autocompleteJSONParse=function(b,c){var i,g=/^\{?[\s]*suggestions:[\s]*.*[\s]*\}?$/m,h,e,a,f,d="";if(!b){return}a=b.match(g);if(a&&a.length>0){a=a[0].split(":",2);if(a&&a.length===2){f=a[1].replace(/^\[[\s'"]*/,"").replace(/['"]?][\s}]*$/,"").split(/["',\s]+['"]/);d=PAUTOCOMPLETE.arrayToAutocompleteUL(f)}}return d};if(this.Ajax!=undefined){PAUTOCOMPLETE.Autocompleter=Class.create(Ajax.Autocompleter,{initialize:function(c,d,b,a){this.baseInitialize(c,d,a);this.options.asynchronous=true;this.options.onComplete=this.onComplete.bind(this);this.options.defaultParams=this.options.parameters||null;this.url=b},onComplete:function(b){var a=PAUTOCOMPLETE.autocompleteJSONParse(b.responseText,this.element);this.updateChoices(a||b.responseText)}})}var MENUTREE={};MENUTREE.collapseChildren=false;MENUTREE.onBeforeResize=null;MENUTREE.onAfterResize=null;MENUTREE.currentOpenElement=null;MENUTREE.affordanceCloseLoc="/pathfinderRPG/prd/image/blueminus.png";MENUTREE.affordanceOpenLoc="/pathfinderRPG/prd/image/blueplus.png";MENUTREE.getParent=function(a){return a.parentElement||a.parentNode};MENUTREE.getPreviousSibling=function(b){var c,a;if(!MENUTREE.getParent(b)){return null}c=MENUTREE.getParent(b).children;if(c){for(a=c.length;a--;){if(c[a]===b){if((a-1)>=0){return(c[a-1])}else{return null}}}}return null};MENUTREE.getNextSibling=function(b){var c,a;c=MENUTREE.getParent(b).children;for(a=c.length;a--;){if(c[a]===b){if((a+1)<c.length){return(c[a+1])}else{return null}}}return null};MENUTREE.openCurrentPage=function(){var k,h,a,g,j="",l,d,b,c,e,i=[],f;if(f=document.getElementById("sideNav")){a=window.location.pathname.split("/");for(k=0,g=a.length;k<a.length;k++){if(a[k]===""){continue}j=j+"/"+a[k];if(a[k]==="prd"){break}}if(j===""){j="/pathfinderRPG/prd"}l=f.getElementsByTagName("a");i[0]=window.location.pathname.replace(j,"/pathfinderRPG/prd");if(globalNavPath){for(h=1,k=globalNavPath.length;k--;){i[h++]=globalNavPath[k].href}}for(k=l.length;k--;){if(l[k]){for(h=i.length;h--;){d=i[h];if(l[k].href.match(/http/)){b=l[k].href.replace(/http[s]?:\/\/[^\/]*/,"")}else{b=l[k].href}if(d===b){l[k].style.fontWeight="700";c=l[k];while(c=MENUTREE.getParent(c)){if(c.className&&c.className.indexOf("tree")>=0){e=MENUTREE.getPreviousSibling(c);if(e){PURCHASELINK.replaceLinkText(e.id);e.style.fontWeight="700"}MENUTREE.expand(c)}}}}}}}};MENUTREE.collapse=function(a){var b,c;if(a){if(MENUTREE.onBeforeResize){MENUTREE.onBeforeResize.call()}if(MENUTREE.collapseChildren){b=a.getElementsByTagName("ul");for(c=b.length;c--;){if((b[c].tagName.toLowerCase()==="ul")&&(b[c].className.indexOf("tree")>=0)){b[c].style.display="none"}}}a.style.display="none";MENUTREE.toggleAffordance(a,"+");MENUTREE.currentOpenElement=null;if(MENUTREE.onAfterResize){MENUTREE.onAfterResize.call()}}};MENUTREE.expand=function(a){if(a){if(MENUTREE.onBeforeResize){MENUTREE.onBeforeResize.call()}if(MENUTREE.currentOpenElement){MENUTREE.collapse(MENUTREE.currentOpenElement)}MENUTREE.currentOpenElement=a;MENUTREE.toggleAffordance(a,"-");a.style.display="inline-block";if(MENUTREE.onAfterResize){MENUTREE.onAfterResize.call()}}};MENUTREE.getAffordanceLink=function(a){var b=MENUTREE.getPreviousSibling(a);while(b&&b.children){if(b.tagName.toLowerCase()==="a"){if(b.children[0].className.indexOf("affordance")>=0){return b.children[0];break}}b=b.children[0]}return null};MENUTREE.toggleAffordance=function(c,b){var d,a;d=MENUTREE.getAffordanceLink(c);if(d){if(b){if(d.alt===b){return}a=b}else{if(d.alt==="+"){a="-"}else{a="+"}}d.alt=a;if(a==="-"){d.src=MENUTREE.affordanceCloseLoc}else{d.src=MENUTREE.affordanceOpenLoc}}};MENUTREE.toggle=function(c){var a,b=(c?c.target:window.event.srcElement);a=b.menuUL;if(!a){while(b.tagName.toLowerCase()!="li"){b=MENUTREE.getParent(b)}a=MENUTREE.getNextSibling(b)}if(a){if(a.className.indexOf("tree")<0){return true}if(a.style.display===""||a.style.display==="none"){MENUTREE.expand(a)}else{MENUTREE.collapse(a)}}if(c){c.preventDefault()}return false};MENUTREE.getNestedLink=function(a){var b=a;while(b.children){if(b.children[0].tagName.toLowerCase()==="a"){return b.children[0]}b=b.children[0]}return null};MENUTREE.setupCollapsibles=function(a){var d,c,b=a.getElementsByTagName("li");for(d=b.length;d--;){if(b[d].className.indexOf("tree")>=0){b[d].style.display="none";c=MENUTREE.getPreviousSibling(b[d]);if(c){c=MENUTREE.getNestedLink(c);if(c){c.onclick=MENUTREE.toggle;c.menuUL=b[d]}}}}};var PURCHASELINK={};PURCHASELINK.coreLink="/products/btpy88yj";PURCHASELINK.apgLink="/products/btpy8fo1";PURCHASELINK.argLink="/products/btpy8rv2";PURCHASELINK.umLink="/products/btpy8k8r";PURCHASELINK.ucLink="/products/btpy8mcz";PURCHASELINK.ueLink = "/products/btpy8tmc";PURCHASELINK.gmgLink="/products/btpy8ffn";PURCHASELINK.bestiaryLink="/products/btpy8auu";PURCHASELINK.bestiary2Link="/products/btpy8hif";PURCHASELINK.bestiary3Link="/products/btpy8odu";PURCHASELINK.npcLink="/products/btpy8sdq";PURCHASELINK.ucaLink="/products/btpy8x64";PURCHASELINK.maLink="/products/btpy8ywe";PURCHASELINK.linkText=[{name:"core",line:[{text:"Purchase the Pathfinder ",link:null},{text:"Core Rulebook",link:PURCHASELINK.coreLink},{text:" or ",link:null},{text:"Bestiary.",link:PURCHASELINK.bestiaryLink}]},{name:"apg",line:[{text:"Purchase the Pathfinder ",link:null},{text:"Core Rulebook",link:PURCHASELINK.coreLink},{text:" or ",link:null},{text:"Advanced Player's Guide.",link:PURCHASELINK.apgLink}]},{name:"arg",line:[{text:"Purchase the Pathfinder ",link:null},{text:"Core Rulebook",link:PURCHASELINK.coreLink},{text:" or ",link:null},{text:"Advanced Race Guide.",link:PURCHASELINK.argLink}]},{name:"um",line:[{text:"Purchase the Pathfinder ",link:null},{text:"Core Rulebook",link:PURCHASELINK.coreLink},{text:" or ",link:null},{text:"Ultimate Magic.",link:PURCHASELINK.umLink}]},{name:"uc",line:[{text:"Purchase the Pathfinder ",link:null},{text:"Core Rulebook",link:PURCHASELINK.coreLink},{text:" or ",link:null},{text:"Ultimate Combat.",link:PURCHASELINK.ucLink}]},{name:"ue",line:[{text:"Purchase the Pathfinder ",link:null},{text:"Core Rulebook",link:PURCHASELINK.coreLink},{text:" or ",link:null},{text:"Ultimate Equipment.",link:PURCHASELINK.ucLink}]},{name:"gmg",line:[{text:"Purchase the Pathfinder ",link:null},{text:"Core Rulebook",link:PURCHASELINK.coreLink},{text:" or ",link:null},{text:"Game Mastery Guide.",link:PURCHASELINK.gmgLink}]},{name:"bestiary",line:[{text:"Purchase the Pathfinder ",link:null},{text:"Core Rulebook",link:PURCHASELINK.coreLink},{text:" or ",link:null},{text:"Bestiary.",link:PURCHASELINK.bestiaryLink}]},{name:"bestiary2",line:[{text:"Purchase the Pathfinder ",link:null},{text:"Core Rulebook",link:PURCHASELINK.coreLink},{text:" or ",link:null},{text:"Bestiary 2.",link:PURCHASELINK.bestiary2Link}]},{name:"bestiary3",line:[{text:"Purchase the Pathfinder ",link:null},{text:"Core Rulebook",link:PURCHASELINK.coreLink},{text:" or ",link:null},{text:"Bestiary 3.",link:PURCHASELINK.bestiary3Link}]},{name:"npc",line:[{text:"Purchase the Pathfinder ",link:null},{text:"Core Rulebook",link:PURCHASELINK.coreLink},{text:" or ",link:null},{text:"NPC Codex.",link:PURCHASELINK.npcLink}]},{name:"uca",line:[{text:"Purchase the Pathfinder ",link:null},{text:"Core Rulebook",link:PURCHASELINK.coreLink},{text:" or ",link:null},{text:"Ultimate Campaign.",link:PURCHASELINK.ucaLink}]},{name:"maa",line:[{text:"Purchase the Pathfinder ",link:null},{text:"Core Rulebook",link:PURCHASELINK.coreLink},{text:" or ",link:null},{text:"Mythic Adventures.",link:PURCHASELINK.ucaLink}]}];PURCHASELINK.replaceLinkText=function(b){var a;if(b){for(a=PURCHASELINK.linkText.length;a--;){if(PURCHASELINK.linkText[a].name===b){PURCHASELINK.replacePurchaseLink(PURCHASELINK.linkText[a].line);break}}}};PURCHASELINK.replacePurchaseLink=function(c){var a,b,e,d;if(d=document.getElementById("purchase-link")){for(a=d.childNodes.length;a--;){d.removeChild(d.childNodes[a])}for(b=c.length,a=0;a<b;a++){if(c[a].link){e=document.createElement("a");e.setAttribute("href",c[a].link);e.appendChild(document.createTextNode(c[a].text))}else{e=document.createTextNode(c[a].text)}d.appendChild(e)}}};var PSCROLLER={};PSCROLLER.IMAGE_DIR="/pathfinderRPG/prd/image/";PSCROLLER.GRAPHIC_DIM=5;PSCROLLER.PADDING=25;PSCROLLER.PREFIX="vpbreaker";PSCROLLER.PREFIXRE=new RegExp("^"+PSCROLLER.PREFIX+"\\d{1,2}$");PSCROLLER.CALCULATEPADDINGWITHNAV=4;PSCROLLER.CALCULATEPADDINGTABLE=3;PSCROLLER.CALCULATEPADDINGBODY=2;PSCROLLER.CALCULATEPADDINGSTYLESHEET=1;PSCROLLER.CALCULATEPADDINGNONE=0;PSCROLLER.NAVWIDTH=300;PSCROLLER.initialized=false;PSCROLLER.calculatePaddingMethod=PSCROLLER.CALCULATEPADDINGNONE;PSCROLLER.calculatedPadding=(2*PSCROLLER.PADDING);PSCROLLER.scrollerDivs=[];PSCROLLER.resizeTimeoutId=null;PSCROLLER.getStyle=function(a){if(window.getComputedStyle){return window.getComputedStyle(a,null)}return a.currentStyle};PSCROLLER.bodyWrap=function(){if(document.iscroll){document.iscroll.wrapper.style.height=window.innerHeight+"px";document.iscroll.refresh()}changeFontSize(document.getElementById("navPath"),maxNavFontSize)};PSCROLLER.doResize=function(){if(window.innerWidth<800){scrollTo(0,1)}PSCROLLER.processScrollerDivs();setTimeout(PSCROLLER.bodyWrap,200)};PSCROLLER.getParent=function(a){return a.parentElement||a.parentNode};PSCROLLER.resize=function(a){PSCROLLER.doResize()};PSCROLLER.addScrolledGraphics=function(b){var a=this;if(!a){return}if(a.hScroll){if(a.x>=0){PSCROLLER.removeMoreGraphic(a.wrapper,"left")}else{PSCROLLER.addMoreGraphic(a.wrapper,"left")}if(a.x<=a.maxScrollX){PSCROLLER.removeMoreGraphic(a.wrapper,"right")}else{PSCROLLER.addMoreGraphic(a.wrapper,"right")}}if(a.vScroll){if(a.y>=0){PSCROLLER.removeMoreGraphic(a.wrapper,"top")}else{PSCROLLER.addMoreGraphic(a.wrapper,"top")}if(a.y<=a.maxScrollY){PSCROLLER.removeMoreGraphic(a.wrapper,"bottom")}else{PSCROLLER.addMoreGraphic(a.wrapper,"bottom")}}};PSCROLLER.addMoreGraphic=function(c,a){var b;b=document.getElementById(c.id+a);if(!b){b=document.createElement("img");b.id=c.id+a;b.style.position="absolute"}if(a==="left"||a==="right"){b.height=c.offsetHeight;b.width=PSCROLLER.GRAPHIC_DIM}if(a==="top"||a==="bottom"){b.height=PSCROLLER.GRAPHIC_DIM;b.width=c.offsetWidth}switch(a){case"left":b.src=PSCROLLER.IMAGE_DIR+"morexleft.png";b.style.left="0";b.style.top="0";break;case"right":b.src=PSCROLLER.IMAGE_DIR+"morexright.png";b.style.left=(c.offsetWidth-PSCROLLER.GRAPHIC_DIM)+"px";b.style.top="0";break;case"top":b.src=PSCROLLER.IMAGE_DIR+"moreytop.png";b.style.left="0";b.style.top="0";break;case"bottom":b.src=PSCROLLER.IMAGE_DIR+"moreybottom.png";b.style.top=(c.offsetHeight-PSCROLLER.GRAPHIC_DIM)+"px";b.style.left="0";break;default:break}c.appendChild(b)};PSCROLLER.createScroller=function(c,b){var a;if(c){if(!c.iscroll){c.iscroll=new iScroll(c.id,b);c.iscroll.options.onScrollMove=PSCROLLER.addScrolledGraphics;c.iscroll.options.onScrollEnd=PSCROLLER.addScrolledGraphics;c.iscroll.options.onBeforeScrollStart=null}}};PSCROLLER.removeMoreGraphic=function(c,a){var b;if(b=document.getElementById(c.id+a)){c.removeChild(b);b=null}};PSCROLLER.encapsulateElement=function(a){var b;if(a.offsetWidth<=(window.innerWidth-(PSCROLLER.calculatedPadding))){return null}if(!PSCROLLER.hasScrollerDiv(a)){b=document.createElement("div");PSCROLLER.setBreakerId(b);b.style.position="relative";b.style.display="block";b.style.margin="0 auto";b.style.zIndex="3";PSCROLLER.getParent(a).insertBefore(b,a);b.appendChild(a)}else{b=PSCROLLER.getParent(a)}a.style.width=a.offsetWidth+"px";b.style.width=(window.innerWidth-(PSCROLLER.calulatedPadding))+"px";return b};PSCROLLER.removeScroller=function(a){var b=null;b=PSCROLLER.getParent(a);if(PSCROLLER.hasScrollerDiv(a)){PSCROLLER.unsetBreakerId(b);PSCROLLER.getParent(b).insertBefore(a,b)}if(b.iscroll){PSCROLLER.removeMoreGraphic(b.iscroll,"left");PSCROLLER.removeMoreGraphic(b.iscroll,"right");b.iscroll.destroy();b.iscroll=null}PSCROLLER.getParent(b).removeChild(b);b=null};PSCROLLER.encapsulateMenu=function(){var a,d,c=null,b;if(window.innerHeight>800&&window.innerWidth>800){return null}if(b=document.getElementById("sideNav")){if(b.children){for(a=b.children.length;a--;){if(b.children[a].className.indexOf("sideContainer")>=0){d=b.children[a];c=document.createElement("div");c.id="navDiv";c.style.height="320px";c.style.position="relative";PSCROLLER.getParent(d).insertBefore(c,d);c.appendChild(d);break}}}}return c};PSCROLLER.setBreakerId=function(b){var a=PSCROLLER.scrollerDivs.length,c;for(c=0;c<a;c++){if(PSCROLLER.scrollerDivs[c]===null){break}}b.id=PSCROLLER.PREFIX+c;PSCROLLER.scrollerDivs[c]=b};PSCROLLER.unsetBreakerId=function(a){var b=0;if(a.id.match(PSCROLLER.PREFIXRE)){b=parseInt(a.id.substring(PSCROLLER.PREFIX.length),10);if(b>0&&PSCROLLER.scrollerDivs.length<b){PSCROLLER.scrollerDivs[b]=null}}};PSCROLLER.calculatePaddingFromElement=function(a){var c=0,b=a;while(b){c+=b.offsetLeft;b=b.offsetParent}};PSCROLLER.processScrollerDivs=function(f){var c=document.getElementsByTagName("table"),d,b,a;if(!isAndroid()&&!isIDevice()){return}if(PSCROLLER.calculatePaddingMethod===PSCROLLER.CALCULATEPADDINGWITHNAV&&window.innerWidth>599){PSCROLLER.calculatedPadding=((2*PSCROLLER.PADDING)+PSCROLLER.NAVWIDTH)}for(a=c.length;a--;){if(b=c[a]){if(PSCROLLER.calculatePaddingMethod===PSCROLLER.CALCULATEPADDINGTABLE){PSCROLLER.calculatedPadding=PSCROLLER.calculatePaddingFromElement(b)+PSCROLLER.PADDING}if(b.offsetWidth<=(window.innerWidth-(PSCROLLER.calculatedPadding))){if(PSCROLLER.hasScrollerDiv(b)){PSCROLLER.removeScroller(b)}}else{if(!PSCROLLER.hasScrollerDiv(b)){d=PSCROLLER.encapsulateElement(b)}else{d=PSCROLLER.getParent(b)}if(d){d.style.width=(window.innerWidth-PSCROLLER.calculatedPadding)+"px";if(!d.iscroll){if(PSCROLLER.initialized){PSCROLLER.createScroller(d,{vScroll:false,hScrollbar:false})}}d.iscroll.refresh();PSCROLLER.addScrolledGraphics.call(d.iscroll)}}}}b=null};PSCROLLER.hasScrollerDiv=function(a){return PSCROLLER.getParent(a).id.match(PSCROLLER.PREFIXRE)};PSCROLLER.processMenu=function(){var a=null;a=PSCROLLER.encapsulateMenu();if(a=document.getElementById("navDiv")){if(!a.iscroll){a.iscroll=new iScroll("navDiv",{hScroll:false});a.iscroll.options.onScrollMove=PSCROLLER.addScrolledGraphics;a.iscroll.options.onScrollEnd=PSCROLLER.addScrolledGraphics;PSCROLLER.addScrolledGraphics.call(a.iscroll)}}};PSCROLLER.refreshMenuScroller=function(){var a=document.getElementById("navDiv");if(a&&a.iscroll){a.iscroll.refresh()}};var totalOffset=95;var maxNavFontSize;var resizeTimeoutId;function isIE(){return(/msie/gi).test(navigator.appVersion)}function isAndroid(){return(/android/gi).test(navigator.appVersion)}function isIDevice(){return(/iphone|ipod|ipad/gi).test(navigator.appVersion)}function isIPhone(){return(/iphone|ipod/gi).test(navigator.appVersion)}function buildNavPath(){var a,c,b;c=document.getElementById("navPath");if(globalNavPath&&c){b=document.createElement("a");if(isIPhone()){b.href="/pathfinderRPG/prd/navigation.html";b.appendChild(document.createTextNode("PRD Nav"))}else{b.href="/pathfinderRPG/prd";b.appendChild(document.createTextNode("PRD Home"))}c.appendChild(b);for(a=0;a<globalNavPath.length;a++){c.appendChild(document.createTextNode(" > "));b=document.createElement("a");b.href=globalNavPath[a].href;b.appendChild(document.createTextNode(globalNavPath[a].name));c.appendChild(b)}c.appendChild(document.createTextNode(" > "));b=document.createElement("a");b.href="#";b.appendChild(document.createTextNode(globalTitle));c.appendChild(b);maxNavFontSize=PSCROLLER.getStyle(c).fontSize;changeFontSize(c,maxNavFontSize)}}function scriptingEnabled(){var b=document.getElementById("sideNav"),c=document.getElementById("header"),a=document.getElementById("body");if(b){b.className+=" jsenabled"}if(c){c.className+=" jsenabled"}if(a){a.className+=" jsenabled"}}function setupTree(){var a=document.getElementById("navTable");if(a){MENUTREE.setupCollapsibles(a);MENUTREE.openCurrentPage();MENUTREE.onAfterResize=PSCROLLER.refreshMenuScroller}}function findPos(d){var e=curtop=0,c=d,b=false;while((c=c.parentNode)&&c!=document.body){e-=c.scrollLeft||0;curtop-=c.scrollTop||0;if(getStyle(c,"position")=="fixed"){b=true}}if(b&&!window.opera){var a=scrollDist();e+=a[0];curtop+=a[1]}do{e+=d.offsetLeft;curtop+=d.offsetTop}while(d=d.offsetParent);return{left:e,top:curtop}}function scrollDist(){var a=document.getElementsByTagName("html")[0];if(a.scrollTop&&document.documentElement.scrollTop){return[a.scrollLeft,a.scrollTop]}else{if(a.scrollTop||document.documentElement.scrollTop){return[a.scrollLeft+document.documentElement.scrollLeft,a.scrollTop+document.documentElement.scrollTop]}else{if(document.body.scrollTop){return[document.body.scrollLeft,document.body.scrollTop]}}}return[0,0]}function getStyle(b,a){if(b.currentStyle){var c=b.currentStyle[a]}else{if(window.getComputedStyle){var c=window.getComputedStyle(b,null)[a]}}return c}function scrollToAnchor(b){var c,a,d,b;c=findPos(b);a=c.top;d=PSCROLLER.getStyle(document.getElementById("header"));if(d.position==="fixed"){a-=parseInt(d.height,10)}TOPNAV.moveUp();if(isIDevice()){document.iscroll.refresh();if(b.offsetTop&&b.offsetTop>parseInt(PSCROLLER.getStyle(document.getElementById("header")).height,10)&&document.getElementById("body").offsetHeight>(window.innerHeight?window.innerHeight:screen.availHeight)){document.iscroll.scrollToElement(b,200)}}else{if(window.scrollTo){if(isIE()){a-=parseInt(d.height,10)}a=a>0?a:1;window.scrollTo(0,a)}else{if(document.body.scrollTop==0){document.documentElement.scrollTop=a}else{document.body.scrollTop=a}}}return false}function resizeGlobal(a){if(!isIDevice()&&!isAndroid()){LEGALSCROLLER.legalScrollingHeight}else{LEGALSCROLLER.legalScrollingHeight();PSCROLLER.resize(a)}}var LEGALSCROLLER={};LEGALSCROLLER.legalScrollingHeight=function(){var c=document.getElementById("footer"),a,b=(window.innerHeight||(document.documentElement?document.documentElement.clientHeight:document.clientHeight));if(c){if(c.children){a=c.children[0];if(!isIDevice()){b-=parseInt(PSCROLLER.getStyle(document.getElementById("body")).paddingTop,10)}b-=a.offsetHeight;c.style.height=b+"px"}}};function getHeight(){if(window.innerHeight){return window.innerHeight}if(document.documentElement){return document.documentElement.clientHeight}return document.clientHeight}function setupPage(){var b,a=getHeight();if(a>600){scriptingEnabled()}LEGALSCROLLER.legalScrollingHeight();if(window.orientation){window.onorientationchange=resizeGlobal}else{window.onresize=resizeGlobal}buildNavPath();prepLinks();if(PSCROLLER.calculatePaddingMethod===PSCROLLER.CALCULATEPADDINGBODY){PSCROLLER.calculatedPadding=PSCROLLER.calculatePaddingFromEl(document.getElementById("body"))}if(a>600){setupTree()}if(isIDevice()||isAndroid()){scroll(0,1);PSCROLLER.processScrollerDivs;PSCROLLER.initialized=true;setTimeout(function(){PSCROLLER.processScrollerDivs();if(isIDevice()){b=document.getElementById("body-scroller");if(b){b.style.height=window.innerHeight+"px";document.iscroll=new iScroll("body-scroller",{hScroll:false,scrollOffsetTop:(0-parseInt(PSCROLLER.getStyle(document.getElementById("header")).height,10))});document.iscroll.options.onScrollMove=TOPNAV.moveUp;window.onscroll=function(c){c.preventDefault()};scrollOnLoad()}}},50)}else{scrollOnLoad()}if(this.PAUTOCOMPLETE&&PAUTOCOMPLETE.Autocompleter!=undefined){new PAUTOCOMPLETE.Autocompleter("searchBox","acResults","/cgi-bin/WebObjects/Store.woa/wa/SearchSupport/getTermSuggestions",{noSetWidth:true,selectFirst:false,paramName:"query",minChars:"2"})}TOPNAV.setupTopNav();window.onkeydown=doPaging}function scrollOnLoad(){var b,d,a,c,b=window.location.toString();if((d=b.indexOf("#"))!=-1){a=b.slice(d);a=a.replace(/^#_?/,"");a=a.replace(/-*\((combat|grit|style|teamwork|metamagic|performance|critical)(,-(combat|grit|style|teamwork|metamagic|performance|critical))*\)/,"");if(c=document.getElementById(a)){scrollToAnchor(c)}}}function cleanAnchor(a){return a.slice(a.indexOf("#")).replace(/^#?_?/,"").replace(/-*\((combat|grit|style|teamwork|metamagic|preformance|critical)(,-(combat|grit|style|teamwork|metamagic|performance|critical))*\)/,"")}function prepLinks(){var b,c,f,e,a,d,g=/^http[s]?:\/\/[^\/]*\//;b=document.getElementsByTagName("a");for(c=0;c<b.length;c++){f=(b[c].getAttribute("href")||"");f=(f.search(g)>=0?f.slice(f.match(g)[0].length-1):f);if(f){if((e=f.indexOf("#"))!=-1&&(e===0||window.location.pathname===f.split("#")[0])){a=cleanAnchor(b[c].getAttribute("href"));if(a.search(/[_]?(sideNav|topNav)/)<0){if(d=document.getElementById(a)){b[c].onclick=function(k){var j,i,h;if(k){k.preventDefault()}h=(k?k.target:window.event.srcElement);while(h.parentNode&&h.tagName.toLowerCase()!="a"){h=h.parentNode}if(!h.href){return false}i=cleanAnchor(h.href);j=document.getElementById(i);scrollToAnchor(j);return false};b[c].ourAnchor=d}}}}}}TOPNAV={};TOPNAV.lastMenu=null;TOPNAV.BOOKS=["core","apg","arg","um","uc","ue","gmg","uca","ma","bestiary","npc","index"];TOPNAV.setupTopNav=function(){var a,c,b;if(!document.getElementById("topNav")){return false}for(a=TOPNAV.BOOKS.length;a--;){if(b=document.getElementById("topnav-book-"+TOPNAV.BOOKS[a])){b.onclick=TOPNAV.onclick}if(c=document.getElementById("topnav-"+TOPNAV.BOOKS[a])){c.style.display="block";c.style.top=(90-c.offsetHeight-12)+"px"}addEventListener("resize",TOPNAV.setLeft,false)}TOPNAV.setLeft()};TOPNAV.setLeft=function(d){var a,c,b;for(a=TOPNAV.BOOKS.length;a--;){if(b=document.getElementById("topnav-book-"+TOPNAV.BOOKS[a])){if(c=document.getElementById("topnav-"+TOPNAV.BOOKS[a])){c.style.left=findPos(b).left+"px"}}}};TOPNAV.moveUp=function(b,a){if(TOPNAV.lastMenu){new Effect.Move(TOPNAV.lastMenu,{x:0,y:(0-TOPNAV.lastMenu.offsetHeight),mode:"relative",duration:0.4})}TOPNAV.lastMenu=null};TOPNAV.onclick=function(c){var d,a,b=PSCROLLER.getParent(c.target);if(b){d=b.id.replace("book-","");if(a=document.getElementById(d)){if(!TOPNAV.lastMenu||TOPNAV.lastMenu!=a){a.style.top=(90-a.offsetHeight-12)+"px";new Effect.Move(a,{x:0,y:(a.offsetHeight),mode:"relative",duration:0.4});TOPNAV.moveUp();TOPNAV.lastMenu=a}else{TOPNAV.moveUp()}}}c.preventDefault();return true};function changeFontSize(b,i){var a=PSCROLLER.getStyle(b),f=a.fontSize,h=f.match(/^\d{1,2}/),c=b.offsetWidth,g=null,e,d;g=(i?i.match(/^\d{1,2}/):"12"),e=(b.textContent?b.textContent:b.innerText);d=Math.floor((c/e.length)/0.55);if(d>g){d=g}b.style.fontSize=d+"px"}function doPaging(b){var d=(b?b:window.event),c,a,f;if(d.keyCode!=33&&d.keyCode!=34){return true}a=(window.innerHeight||screen.availHeight);f=PSCROLLER.getStyle(document.getElementById("header"));if(f.position==="fixed"){a-=parseInt(f.height,10)}if(document.iscroll){a-=document.iscroll.options.wrapperOffsetTop}a=(d.keyCode===33?-a:a);TOPNAV.moveUp();if(isIDevice()){document.iscroll.refresh();if(document.getElementById("body").offsetHeight>window.innerHeight){document.iscroll.scrollTo(0,a,200,true)}}else{if(window.scrollTo){a=((window.pageYOffset+a)>0?window.pageYOffset+a:1);window.scrollTo(0,a)}else{if(document.body.scrollTop==0){document.documentElement.scrollTop+=a}else{document.body.scrollTop+=a}}}return false}function toggleLinks(g,c){var e,f,b,i,h,d;f=document.getElementsByClassName(g);for(b=f.length;b--;){i=f[b].className.split(" ");e=(c?"block":"none");for(d=0;d<i.length;d++){if(i[d].match(/^link-/)){h=document.getElementById(i[d].substr(5)+"-checkbox");if(h&&!h.checked){e="none"}}}f[b].style.display=e}if(document.iscroll){document.iscroll.refresh()}}function showLinks(c){var b,a;if(c.target.type==="radio"){a=document.getElementsByName(c.target.name);for(x=a.length;x--;){if(!a.checked){toggleLinks("link-"+a[x].value,"0",false);COOKIES.set("link-by-book-"+a[x].value,"0",1000)}}}if(c.className==="link-by-book"){b=c}else{b=(c?c.target:window.event.srcElement)}if(!b.checked){toggleLinks("link-"+b.value,false);COOKIES.set("link-by-book-"+b.value,"0",1000)}else{toggleLinks("link-"+b.value,true);COOKIES.set("link-by-book-"+b.value,"1",1000)}return true}function setupLinkByBook(){var b,c,a;c=document.getElementsByClassName("link-by-book");if(c){for(b=c.length;b--;){if(COOKIES.get("link-by-book-"+c[b].value)==="0"){c[b].checked=false;toggleLinks("link-"+c[b].value,false)}else{c[b].checked=true;toggleLinks("link-"+c[b].value,true)}c[b].onchange=showLinks}}}var COOKIES={};COOKIES.set=function(c,d,e){var b=new Date(),a;if(e){b.setTime(b.getTime()+(e*24*60*60*1000));a="; expires="+b.toGMTString()}else{a=""}document.cookie=c+"="+d+a+"; path=/"};COOKIES.get=function(b){var e=b+"=",a=document.cookie.split(";"),d,f;for(d=0;d<a.length;d++){f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)==0){return f.substring(e.length,f.length)}}return null};COOKIES.erase=function(a){COOKIES.set(a,"",-1)};